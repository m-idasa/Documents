---
title: اطلاعات معاملات آخرین روز
layout: default
parent: معاملات
---

# اطلاعات معاملات آخرین روز

## 📌 آدرس سرویس

```
POST /Trade/TradeLastDay
Host: {BaseUrl}
Authorization: Bearer {token}
Content-Type: application/json
```

مثال:
```
POST http://service.tsetmc.com/Trade/TradeLastDay
```

---

## 🧾 نام سرویس

`TradeLastDay`

---

## 🎯 توضیحات

این سرویس اطلاعات مربوط به آخرین روز معاملات بازار بورس، فرابورس، انرژی و سایر بازارها را برمی‌گرداند.

---

## درخواست

پارامترهای ورودی در قالب JSON ارسال می‌گردد.

### 📥 پارامترهای ورودی

Body (JSON):

| نام پارامتر | نوع     | توضیح                                                                                                                                           |
| ----------- | ------- | ----------------------------------------------------------------------------------------------------------------------------------------------- |
| `Flow`      | integer | کد بازار |

#### مقادیر ممکن برای `Flow`

| توضیح | مقدار |
|-------|-------|
| `1`  | بورس |
| `2`  | فرابورس |
| `3` |  مشتقه ( بو رس و فرابورس) |
| `31` |  مشتقه بورس |
| `32` |  مشتقه فرابورس |
| `6` |  انرژی سلف برق |
| `61` |  انرژی مشتقه |
| `62` |  انرژی غیر سلف برق |
| `7` | کالا |
| `5` | پایه فرابورس |

## پاسخ

پاسخ در قالب JSON برمی‌گردد.

### 📤 ساختار خروجی:

خروجی به صورت `Dataset` از نوع XML برمی‌گردد که شامل اطلاعات زیر است:

| نام فیلد         | نوع          | توضیح                 |
| ---------------- | ------------ | --------------------- |
| `LVal18AFC`      | string       | نماد                  |
| `DEven`          | int          | تاریخ                 |
| `ZTotTran`       | decimal      | تعداد معاملات         |
| `QTotTran5J`     | decimal      | حجم معاملات           |
| `QTotCap`        | decimal      | ارزش معاملات          |
| `InsCode`        | long         | کد نماد               |
| `LVal30`         | string       | توضیح نماد            |
| `PClosing`       | decimal      | قیمت پایانی           |
| `PDrCotVal`      | decimal      | آخرین قیمت معامله شده |
| `PriceChange`    | decimal      | تغییر قیمت            |
| `PriceMin`       | decimal      | حداقل قیمت            |
| `PriceMax`       | decimal      | حداکثر قیمت           |
| `PriceFirst`     | decimal      | اولین قیمت معامله     |
| `PriceYesterday` | decimal      | قیمت دیروز            |
| `Last`           | unsignedByte | وضعیت آخر             |
| `HEven`          | int          | ساعت                  |

---

## 📦 نمونه ورودی 

```json
{
  "Flow": 1
}
```

## 📄 نمونه خروجی

```json
{
  "IsSuccess": true,
  "Data":
    [
      {
        "LVal18AFC": "خودرو",
        "DEven": 20240101,
        "ZTotTran": 120,
        "QTotTran5J": 350000,
        "QTotCap": 500000000,
        "InsCode": 1234567890,
        "LVal30": "ایران خودرو",
        "PClosing": 1500,
        "PDrCotVal": 1520,
        "PriceChange": "+20",
        "PriceMin": 1480,
        "PriceMax": 1530,
        "PriceFirst": 1500,
        "PriceYesterday": 1480,
        "Last": 0,
        "HEven": 112530
      }
    ],
  "Msg": null
}

```

---

## ✍️ نکات تکمیلی

- حتماً باید در هدر درخواست، **توکن JWT معتبر** ارسال شود.
- مقادیر `Flow` عددی هستند و نقش تعیین بازار هدف را دارند.
- خروجی با ساختار `DataSet` است و ممکن است شامل چندین رکورد `TradeLastDay` باشد.

## خطاهای محتمل

| کد وضعیت HTTP | توضیح |
|---------------|-------|
| 401 | عدم احراز هویت یا توکن نامعتبر |
| 403 | عدم دسترسی (کاربر نقش لازم را ندارد) |
| 400 | داده ورودی نامعتبر |
| 500 | خطای داخلی سرور |

---

